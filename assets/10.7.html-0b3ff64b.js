import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{r as e,o as c,c as p,a as o,b as n,d as a,w as A,e as i}from"./app-9da01d16.js";const K="data:image/jpeg;base64,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KACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACuM8Uf8lE8C/8AXxe/+kzV2deefEH+2P8AhMvBX9h/Yft3n3nl/bt/lZ8g5zs5+7u/HFAHodU9V02HV9NmsLhpFilADGMgMMEHjIPpXJY+Kv8Ae8Gf983X+NGPir/e8Gf983X+NANXOn0/RLbS9Qv7q0eWNb5xLLbgjyhJ/E6jGQzcZ5wcZxnJM2rf8ga+/wCveT/0E1yWPir/AHvBn/fN1/jVXUh8Uv7Lu/Mbwd5fkvu2i6zjac45oA3Phz/yTbw3/wBg6H/0AV09cv8ADjd/wrXw5uxn+z4enptGK6igAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACuM8Uf8lE8C/9fF7/AOkzV2dcZ4o/5KJ4F/6+L3/0magDs6KKyPE0og0KaQxhwJIhtLMvWRR1Ug/rSbsrga9U9W/5A19/17yf+gmrlU9W/wCQNff9e8n/AKCaYGJ8Of8Akm3hv/sHQ/8AoArp65j4c/8AJNvDf/YOh/8AQBXT0AFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAVxnij/kongX/r4vf/SZq7OvPPiDeahY+M/BM+maWdSulnvClsJ1h3/uCD8zcDgk/wDAcd6APQ6ytf0+71SxjtLaSCNGnjad5QSRGrBjtA/iOAOeOc+1c5/wlPjv/onDf+Du3/wo/wCEp8d/9E4b/wAHdv8A4UNXA7iqerf8ga+/695P/QTXJ/8ACU+O/wDonDf+Du3/AMKq6l4n8ctpd2r/AA7ZEMLhm/tqA4G084xQBt/Dn/km3hv/ALB0P/oArp65f4bkn4a+HMrg/wBnw8f8BFdRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABXGeKP8AkongX/r4vf8A0mauzrjPFH/JRPAv/Xxe/wDpM1AHZ0UVn63evp2j3F3HLBE8YBDzozIMsByF5PXtQD0NCqerf8ga+/695P8A0E1cqnq3/IGvv+veT/0E0AYnw5/5Jt4b/wCwdD/6AK6euY+HP/JNvDf/AGDof/QBXT0AFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAVxnij/kongX/r4vf/AEmauzrjPFH/ACUTwL/18Xv/AKTNQB2dY/imxuNS8NXlpaR+ZPIF2ruAzhgep47VsUUmrqwmrqwVT1b/AJA19/17yf8AoJq5VPVv+QNff9e8n/oJpjMT4c/8k28N/wDYOh/9AFdPXMfDn/km3hv/ALB0P/oArp6ACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK5fxX4d1XVtT0TUtHv7W0u9LkldftMLSI3mRlCMAjsT3rqKKAON+wfEX/AKD3h/8A8F0v/wAco+wfEX/oPeH/APwXS/8AxyuyooA437B8Rf8AoPeH/wDwXS//AByorjSfiHc20sD69oASVCjEadJnBGP+eldvRQBleGdIfQPC+maRJKsz2VskBkUYDFRjOK1aKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//2Q==",U={},F=i('<h1 id="_10-7-类型的-string-方法和格式化描述符" tabindex="-1"><a class="header-anchor" href="#_10-7-类型的-string-方法和格式化描述符" aria-hidden="true">#</a> 10.7 类型的 String() 方法和格式化描述符</h1><p>当定义了一个有很多方法的类型时，十之八九你会使用 <code>String()</code> 方法来定制类型的字符串形式的输出，换句话说：一种可阅读性和打印性的输出。如果类型定义了 <code>String()</code> 方法，它会被用在 <code>fmt.Printf()</code> 中生成默认的输出：等同于使用格式化描述符 <code>%v</code> 产生的输出。还有 <code>fmt.Print()</code> 和 <code>fmt.Println()</code> 也会自动使用 <code>String()</code> 方法。</p>',2),l=i(`<p>示例 10.22 <a href="examples/chapter_10/method_string.go">method_string.go</a>：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;strconv&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> TwoInts <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	a <span class="token builtin">int</span>
	b <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	two1 <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>TwoInts<span class="token punctuation">)</span>
	two1<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">12</span>
	two1<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">10</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;two1 is: %v\\n&quot;</span><span class="token punctuation">,</span> two1<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;two1 is:&quot;</span><span class="token punctuation">,</span> two1<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;two1 is: %T\\n&quot;</span><span class="token punctuation">,</span> two1<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;two1 is: %#v\\n&quot;</span><span class="token punctuation">,</span> two1<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>tn <span class="token operator">*</span>TwoInts<span class="token punctuation">)</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token string">&quot;(&quot;</span> <span class="token operator">+</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span>tn<span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span>tn<span class="token punctuation">.</span>b<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>输出：</p><pre><code>two1 is: (12/10)
two1 is: (12/10)
two1 is: *main.TwoInts
two1 is: &amp;main.TwoInts{a:12, b:10}
</code></pre><p>当你广泛使用一个自定义类型时，最好为它定义 <code>String()</code>方法。从上面的例子也可以看到，格式化描述符 <code>%T</code> 会给出类型的完全规格，<code>%#v</code> 会给出实例的完整输出，包括它的字段（在程序自动生成 <code>Go</code> 代码时也很有用）。</p><p><strong>备注</strong></p><p>不要在 <code>String()</code> 方法里面调用涉及 <code>String()</code> 方法的方法，它会导致意料之外的错误，比如下面的例子，它导致了一个无限递归调用（<code>TT.String()</code> 调用 <code>fmt.Sprintf</code>，而 <code>fmt.Sprintf</code> 又会反过来调用 <code>TT.String()</code>），很快就会导致内存溢出：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> TT <span class="token builtin">float64</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>t TT<span class="token punctuation">)</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%v&quot;</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
t<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>练习 10.12</strong> <a href="exercises/chapter_10/type_string.go">type_string.go</a></p><p>给定结构体类型 <code>T</code>:</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> T <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    a <span class="token builtin">int</span>
    b <span class="token builtin">float32</span>
    c <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>值 <code>t</code>: <code>t := &amp;T{7, -2.35, &quot;abc\\tdef&quot;}</code>。给 T 定义 <code>String()</code>，使得 <code>fmt.Printf(&quot;%v\\n&quot;, t)</code> 输出：<code>7 / -2.350000 / &quot;abc\\tdef&quot;</code>。</p><p><strong>练习 10.13</strong> <a href="exercises/chapter_10/celsius.go">celsius.go</a></p><p>为 <code>float64</code> 定义一个别名类型 <code>Celsius</code>，并给它定义 <code>String()</code>，它输出一个十进制数和 °C 表示的温度值。</p><p><strong>练习 10.14</strong> <a href="exercises/chapter_10/days.go">days.go</a></p><p>为 <code>int</code> 定义一个别名类型 <code>Day</code>，定义一个字符串数组它包含一周七天的名字，为类型 <code>Day</code> 定义 <code>String()</code> 方法，它输出星期几的名字。使用 <code>iota</code> 定义一个枚举常量用于表示一周的中每天（MO、TU...）。</p><p><strong>练习 10.15</strong> <a href="exercises/chapter_10/timezones.go">timezones.go</a></p><p>为 <code>int</code> 定义别名类型 <code>TZ</code>，定义一些常量表示时区，比如 UTC，定义一个 <code>map</code>，它将时区的缩写映射为它的全称，比如：<code>UTC -&gt; &quot;Universal Greenwich time&quot;</code>。为类型 <code>TZ</code> 定义 <code>String()</code> 方法，它输出时区的全称。</p><p><strong>练习 10.16</strong> <a href="exercises/chapter_10/stack_arr.go">stack_arr.go</a> / <a href="exercises/chapter_10/stack_struct.go">stack_struct.go</a></p><p>实现栈 (stack) 数据结构：</p><figure><img src="`+K+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>它的格子包含数据，比如整数 <code>i</code>、<code>j</code>、<code>k</code> 和 <code>l</code> 等等，格子从底部（索引 0）至顶部（索引 n）来索引。这个例子中假定 <code>n = 3</code>，那么一共有 4 个格子。</p><p>一个新栈中所有格子的值都是 <code>0</code>。</p><p>将一个新值放到栈的最顶部一个空（包括零）的格子中，这叫做 push。</p><p>获取栈的最顶部一个非空（非零）的格子的值，这叫做 pop。<br> 现在可以理解为什么栈是一个后进先出 (LIFO) 的结构了吧。</p><p>为栈定义一个 <code>Stack</code> 类型，并为它定义 <code>Push</code> 和 <code>Pop</code> 方法，再为它定义 <code>String()</code> 方法（用于调试）输出栈的内容，比如：<code>[0:i] [1:j] [2:k] [3:l]</code>。</p><p>1）<a href="exercises/chapter_10/stack_arr.go">stack_arr.go</a>：使用长度为 4 的 int 数组作为底层数据结构。</p><p>2） <a href="exercises/chapter_10/stack_struct.go">stack_struct.go</a>：使用包含一个索引和一个 <code>int</code> 数组的结构体作为底层数据结构，索引表示第一个空闲的位置。</p><p>3）使用常量 <code>LIMIT</code> 代替上面表示元素个数的 4 重新实现上面的 1）和 2），使它们更具有一般性。</p><h2 id="链接" tabindex="-1"><a class="header-anchor" href="#链接" aria-hidden="true">#</a> 链接</h2>',30);function u(d,r){const s=e("RouterLink");return c(),p("div",null,[F,o("p",null,[n("我们使用"),a(s,{to:"/the-way-to-go/10.4.html"},{default:A(()=>[n("第 10.4 节")]),_:1}),n("中程序的类型来进行测试：")]),l,o("ul",null,[o("li",null,[a(s,{to:"/the-way-to-go/directory.html"},{default:A(()=>[n("目录")]),_:1})]),o("li",null,[n("上一节："),a(s,{to:"/the-way-to-go/10.6.html"},{default:A(()=>[n("方法")]),_:1})]),o("li",null,[n("下一节："),a(s,{to:"/the-way-to-go/10.8.html"},{default:A(()=>[n("垃圾回收和 SetFinalizer")]),_:1})])])])}const k=t(U,[["render",u],["__file","10.7.html.vue"]]);export{k as default};
